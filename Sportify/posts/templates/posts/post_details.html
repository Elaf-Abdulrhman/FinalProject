{% extends 'main/base.html' %}
{% block title %}Post Details{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="card">
    {% if post.photo %}
      <img src="{{ post.photo.url }}" class="card-img-top" alt="Post photo">
    {% endif %}
    <div class="card-body">
      <p>{{ post.content }}</p>
      {% if post.video %}
        <video class="w-100 mt-3" controls>
          <source src="{{ post.video.url }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      {% endif %}
    </div>
    <div class="card-footer text-muted">
      Posted by {{ post.user.username }} on {{ post.created_at|date:"F d, Y" }}
      {% if user == post.user %}
        <div class="mt-2">
       <button class="btn btn-secondary"><a href="{% url 'posts:edit_post' post.id %}"  style="color: white; text-decoration: none">Edit</a>
</button>
<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
  Delete
</button>


<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title text-danger" id="deleteModalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        Are you sure you want to delete this post? This action cannot be undone.
      </div>

      <div class="modal-footer">
        <form method="POST" action="{% url 'posts:delete_post' post.id %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger">Yes, Delete</button>
        </form>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>

    </div>
  </div>
</div>

        </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
