{% extends 'main/base.html' %}
{% load static %}

{% block title %}Add Post{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="card shadow-sm p-4 mx-auto" style="max-width: 600px;">
    <h4 class="mb-3 text-center">Create a New Post</h4>

    <!-- User info -->
    <div class="d-flex align-items-center mb-4">
    <!-- Profile Photo -->
    {% if request.user.athlete and request.user.athlete.profilePhoto %}
        <!-- Athlete's Profile Photo -->
        <img src="{{ request.user.athlete.profilePhoto.url }}" alt="Profile Photo" 
             class="rounded-circle me-2" style="width: 40px; height: 40px; object-fit: cover; border-radius: 50%; border: 2px solid #ccc;">
    {% elif request.user.club and request.user.club.photo %}
        <!-- Club's Profile Photo -->
        <img src="{{ request.user.club.photo.url }}" alt="Profile Photo" 
             class="rounded-circle me-2" style="width: 40px; height: 40px; object-fit: cover; border-radius: 50%; border: 2px solid #ccc;">
    {% else %}
        <!-- Default Profile Photo -->
        <img src="{% static 'images/profile.png' %}" alt="Default Profile Photo" 
             class="rounded-circle me-2" style="width: 40px; height: 40px; object-fit: cover; border-radius: 50%; border: 2px solid #ccc;">
    {% endif %}
      <div>
        <strong>{{ request.user.first_name|default:"Your name" }}</strong><br>
        <small class="text-muted">@{{ request.user.username }}</small>
      </div>
    </div>

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="mb-4">
  <textarea name="content" id="id_content" class="form-control shadow-sm border-0 rounded-4 p-3" rows="4" placeholder="What's on your mind?" required></textarea>
      </div>


      <div class="d-flex gap-3 align-items-center">
        <label for="id_photo" class="btn btn-outline-secondary d-flex align-items-end">
          <i class="bi bi-image me-1"></i>
        </label>
        <input type="file" id="id_photo" name="photo" accept="image/*" class="d-none">

        <label for="id_video" class="btn btn-outline-secondary d-flex align-items-end">
          <i class="bi bi-camera-video me-1"></i>
        </label>
        <input type="file" id="id_video" name="video" accept="video/*" class="d-none">
      </div>

      <button type="submit" class="btn btn-dark w-100 mt-3">Post</button>
    </form>
  </div>
</div>

{% endblock %}
