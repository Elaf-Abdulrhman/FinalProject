{% extends "main/base.html" %}

{% block content %}
<div class="chat-box" style="border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 1rem;">
  {% for message in messages %}
    <div style="margin-bottom: 0.5rem; {% if message.sender == request.user %}text-align: right;{% endif %}">
      <strong>{{ message.sender.username }}:</strong> {{ message.content }}  <!-- Correctly accessing message.content -->
      <br>
      <small class="text-muted">{{ message.timestamp|date:"M d, H:i" }}</small>
    </div>
  {% endfor %}
</div>

<form method="POST" class="mt-3">
  {% csrf_token %}
  <textarea name="content" rows="2" class="form-control" placeholder="Type a message..."></textarea>
  <button class="btn btn-primary mt-2">Send</button>
</form>
{% endblock %}
